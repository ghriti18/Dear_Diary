import os
from datetime import datetime

DIARY_FILE = "diary_entries.txt"

def add_entry():
    """Prompts the user for a diary entry and appends it with a timestamp."""
    print("\nEnter your diary entry (type 'done' on a new line to finish):")
    entry_lines = []
    while True:
        line = input()
        if line.lower() == 'done':
            break
        entry_lines.append(line)

    content = "\n".join(entry_lines)
    if not content.strip():
        print("Entry cancelled or empty.")
        return

    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    formatted_entry = f"--- ENTRY [{timestamp}] ---\n{content}\n\n"

    try:
        with open(DIARY_FILE, "a") as file:
            file.write(formatted_entry)
        print(f"\nâœ… Entry saved successfully at {timestamp}.")
    except IOError as e:
        print(f"\nAn error occurred while writing to the file: {e}")

def view_entries():
    """Reads and displays all entries from the diary file."""
    if not os.path.exists(DIARY_FILE):
        print("\nYour diary is empty. No entries found.")
        return

    try:
        with open(DIARY_FILE, "r") as file:
            content = file.read()
            if content:
                print("\n--- Your Diary Entries ---")
                print(content)
                print("--------------------------")
            else:
                print("\nYour diary is empty. No entries found.")
    except IOError as e:
        print(f"\nAn error occurred while reading the file: {e}")

def main_menu():
    """Displays the main menu and handles user choices."""
    while True:
        print("\n*** Personal Diary Menu ***")
        print("1 - Add a new entry")
        print("2 - View all entries")
        print("3 - Quit")
        choice = input("Enter your choice (1, 2, or 3): ")

        if choice == '1':
            add_entry()
        elif choice == '2':
            view_entries()
        elif choice == '3':
            print("\nGoodbye!")
            break
        else:
            print("\nInvalid choice. Please enter 1, 2, or 3.")

if __name__ == "__main__":
    main_menu()

